# π‰ Phase 1 μ™„λ£: μΈν”„λΌ κµ¬μ¶•

## μ™„λ£ μΌμ
2025-11-26

## κµ¬ν„ λ‚΄μ—­

### β… μƒμ„±λ νμΌ λ©λ΅

#### 1. μΈν”„λΌ μ„¤μ • νμΌ
- **`docker-compose.yml`** - Docker μ»¨ν…μ΄λ„ μ¤μΌ€μ¤νΈλ μ΄μ…
  - PostgreSQL + TimescaleDB (μ‹κ³„μ—΄ λ°μ΄ν„°)
  - MongoDB (λΉ„μ •ν• λ°μ΄ν„°)
  - Redis (μ‹λ§¨ν‹± μΊμ‹±)
  - Adminer (PostgreSQL κ΄€λ¦¬ UI)
  - Mongo Express (MongoDB κ΄€λ¦¬ UI)

- **`.env.example`** - ν™κ²½ λ³€μ ν…ν”λ¦Ώ
  - API ν‚¤ μ„¤μ •
  - λ°μ΄ν„°λ² μ΄μ¤ μ—°κ²° μ •λ³΄
  - λ°±ν…μ¤ν… μ„¤μ •
  - λ¦¬μ¤ν¬ κ΄€λ¦¬ νλΌλ―Έν„°

#### 2. λ°μ΄ν„°λ² μ΄μ¤ μ΄κΈ°ν™” μ¤ν¬λ¦½νΈ
- **`backend/db/init_postgres.sql`** - PostgreSQL μ¤ν‚¤λ§
  - `ohlcv_btcusdt_1h` (TimescaleDB hypertable)
  - `trades` (κ±°λ μ‹¤ν–‰ κΈ°λ΅)
  - `portfolio_snapshots` (ν¬νΈν΄λ¦¬μ¤ μ¤λƒ…μƒ·)
  - `backtest_results` (λ°±ν…μ¤νΈ κ²°κ³Ό)
  - `document_embeddings` (RAGμ© pgvector)

- **`backend/db/init_mongodb.js`** - MongoDB μ¤ν‚¤λ§
  - `reasoning_logs` (Agent μ¶”λ΅  κ³Όμ •)
  - `news` (λ‰΄μ¤ λ° κ°μ„± λ°μ΄ν„°)
  - `agent_checkpoints` (LangGraph μƒνƒ μ €μ¥)
  - `backtest_metadata` (λ°±ν…μ¤νΈ λ©”νƒ€λ°μ΄ν„°)

#### 3. λ°μ΄ν„° μμ§‘κΈ°
- **`backend/data/ccxt_collector.py`** - OHLCV λ°μ΄ν„° μμ§‘
  - Binance κ±°λμ† μ—°λ™
  - λ°°μΉ μμ§‘ (λ μ΄νΈ λ¦¬λ°‹ μ¤€μ)
  - μ¤‘λ³µ λ°©μ§€
  - μ§„ν–‰ μƒν™© μ¶”μ 
  - CLI μΈν„°νμ΄μ¤

- **`backend/data/news_collector.py`** - λ‰΄μ¤ λ°μ΄ν„° μμ§‘
  - CryptoPanic API μ—°λ™
  - κ°μ„± λ¶„μ„ λ°μ΄ν„° ν¬ν•¨
  - MongoDB μ €μ¥
  - μ¤‘λ³µ λ°©μ§€
  - CLI μΈν„°νμ΄μ¤

#### 4. μμ΅΄μ„± λ° ν…μ¤νΈ
- **`backend/requirements_agent.txt`** - Python μμ΅΄μ„±
  - LangGraph/LangChain (μ¤μΌ€μ¤νΈλ μ΄μ…)
  - Lumibot (λ°±ν…μ¤ν…)
  - CCXT (κ±°λμ† μ—°λ™)
  - Guardrails AI (μ•μ „μ„±)
  - μ‹κ°ν™” λΌμ΄λΈλ¬λ¦¬
  - λ°μ΄ν„°λ² μ΄μ¤ λ“λΌμ΄λ²„

- **`backend/tests/test_phase1_infrastructure.py`** - μΈν”„λΌ κ²€μ¦ ν…μ¤νΈ
  - PostgreSQL μ—°κ²° ν…μ¤νΈ
  - MongoDB μ—°κ²° ν…μ¤νΈ
  - Redis μ—°κ²° ν…μ¤νΈ
  - CCXT κ±°λμ† ν…μ¤νΈ
  - λ°μ΄ν„° μ‚½μ…/μ΅°ν ν…μ¤νΈ

#### 5. λ¬Έμ„ λ° μ¤ν¬λ¦½νΈ
- **`backend/README_PHASE1.md`** - Phase 1 μƒμ„Έ κ°€μ΄λ“
  - μ„¤μΉ λ°©λ²•
  - μ‹¤ν–‰ λ°©λ²•
  - ν…μ¤νΈ λ°©λ²•
  - λ¬Έμ  ν•΄κ²° κ°€μ΄λ“

- **`setup_phase1.bat`** - Windows μλ™ μ„¤μ • μ¤ν¬λ¦½νΈ
- **`setup_phase1.sh`** - Linux/macOS μλ™ μ„¤μ • μ¤ν¬λ¦½νΈ

## π“ κµ¬ν„λ μ•„ν‚¤ν…μ²

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚                     HATS Trading System                     β”‚
β”‚                    Phase 1: Infrastructure                   β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”

β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”      β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚  CCXT Collector  β”‚      β”‚  News Collector  β”‚
β”‚  (ccxt_collector β”‚      β”‚ (news_collector  β”‚
β”‚       .py)       β”‚      β”‚       .py)       β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”      β””β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
         β”‚                         β”‚
         β”‚ OHLCV Data             β”‚ News + Sentiment
         β–Ό                         β–Ό
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚          Docker Compose Network              β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚                                             β”‚
β”‚  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”     β”‚
β”‚  β”‚  PostgreSQL + TimescaleDB         β”‚     β”‚
β”‚  β”‚  Port: 5432                       β”‚     β”‚
β”‚  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤     β”‚
β”‚  β”‚  β€Ά ohlcv_btcusdt_1h (hypertable)  β”‚     β”‚
β”‚  β”‚  β€Ά trades                         β”‚     β”‚
β”‚  β”‚  β€Ά portfolio_snapshots            β”‚     β”‚
β”‚  β”‚  β€Ά backtest_results               β”‚     β”‚
β”‚  β”‚  β€Ά document_embeddings (pgvector) β”‚     β”‚
β”‚  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”     β”‚
β”‚                                             β”‚
β”‚  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”     β”‚
β”‚  β”‚  MongoDB                          β”‚     β”‚
β”‚  β”‚  Port: 27017                      β”‚     β”‚
β”‚  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤     β”‚
β”‚  β”‚  β€Ά reasoning_logs                 β”‚     β”‚
β”‚  β”‚  β€Ά news                           β”‚     β”‚
β”‚  β”‚  β€Ά agent_checkpoints              β”‚     β”‚
β”‚  β”‚  β€Ά backtest_metadata              β”‚     β”‚
β”‚  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”     β”‚
β”‚                                             β”‚
β”‚  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”     β”‚
β”‚  β”‚  Redis                            β”‚     β”‚
β”‚  β”‚  Port: 6379                       β”‚     β”‚
β”‚  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤     β”‚
β”‚  β”‚  Semantic Caching (GPTCache)      β”‚     β”‚
β”‚  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”     β”‚
β”‚                                             β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”

β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚         Management Web Interfaces           β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚  β€Ά Adminer: http://localhost:8080           β”‚
β”‚  β€Ά Mongo Express: http://localhost:8081     β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

## π€ μ‹μ‘ λ°©λ²•

### λ°©λ²• 1: μλ™ μ„¤μ • (κ¶μ¥)

**Windows:**
```cmd
setup_phase1.bat
```

**Linux/macOS:**
```bash
chmod +x setup_phase1.sh
./setup_phase1.sh
```

### λ°©λ²• 2: μλ™ μ„¤μ •

1. **ν™κ²½ λ³€μ μ„¤μ •**
   ```bash
   cp .env.example .env
   # .env νμΌ νΈμ§‘ (μµμ†ν• CRYPTOPANIC_API_TOKEN μ„¤μ •)
   ```

2. **Docker μ»¨ν…μ΄λ„ μ‹μ‘**
   ```bash
   docker-compose up -d
   ```

3. **Python κ°€μƒν™κ²½ μ„¤μ •**
   ```bash
   python -m venv venv
   # Windows: venv\Scripts\activate
   # Linux/macOS: source venv/bin/activate
   pip install -r backend/requirements_agent.txt
   ```

4. **μΈν”„λΌ ν…μ¤νΈ**
   ```bash
   python backend/tests/test_phase1_infrastructure.py
   ```

5. **λ°μ΄ν„° μμ§‘**
   ```bash
   # 1λ…„μΉ OHLCV λ°μ΄ν„° μμ§‘
   python backend/data/ccxt_collector.py --symbol BTC/USDT --timeframe 1h --days 365

   # μµκ·Ό 7μΌ λ‰΄μ¤ μμ§‘
   python backend/data/news_collector.py --currencies BTC --days 7
   ```

## β… κ²€μ¦ μ²΄ν¬λ¦¬μ¤νΈ

- [ ] Docker Desktop μ„¤μΉ λ° μ‹¤ν–‰
- [ ] `docker-compose ps`λ΅ μ»¨ν…μ΄λ„ μ‹¤ν–‰ ν™•μΈ
- [ ] `.env` νμΌ μƒμ„± λ° API ν† ν° μ„¤μ •
- [ ] Python κ°€μƒν™κ²½ μƒμ„±
- [ ] μμ΅΄μ„± μ„¤μΉ μ™„λ£
- [ ] μΈν”„λΌ ν…μ¤νΈ ν†µκ³Ό (7/7 tests)
- [ ] OHLCV λ°μ΄ν„° μμ§‘ μ™„λ£ (~8,760 candles)
- [ ] λ‰΄μ¤ λ°μ΄ν„° μμ§‘ μ™„λ£ (~50-200 articles)
- [ ] Adminerμ—μ„ PostgreSQL λ°μ΄ν„° ν™•μΈ
- [ ] Mongo Expressμ—μ„ MongoDB λ°μ΄ν„° ν™•μΈ

## π“ λ°μ΄ν„° ν™•μΈ μΏΌλ¦¬

### PostgreSQL (Adminer λλ” psql)
```sql
-- OHLCV λ°μ΄ν„° ν™•μΈ
SELECT COUNT(*) as total_candles FROM ohlcv_btcusdt_1h;

-- μµκ·Ό 10κ° μΊ”λ“¤
SELECT * FROM ohlcv_btcusdt_1h ORDER BY timestamp DESC LIMIT 10;

-- κ°€κ²© λ²”μ„ ν™•μΈ
SELECT
    MIN(timestamp) as start_date,
    MAX(timestamp) as end_date,
    MIN(low) as all_time_low,
    MAX(high) as all_time_high,
    AVG(volume) as avg_volume
FROM ohlcv_btcusdt_1h;
```

### MongoDB (Mongo Express λλ” mongosh)
```javascript
// λ‰΄μ¤ κ°μ ν™•μΈ
db.news.countDocuments()

// μµκ·Ό λ‰΄μ¤ 5κ°
db.news.find().sort({published_at: -1}).limit(5)

// κ°μ„± μ μ ν‰κ· 
db.news.aggregate([
  {
    $group: {
      _id: null,
      avg_sentiment: { $avg: "$sentiment.score" },
      total_positive: { $sum: "$sentiment.votes_positive" },
      total_negative: { $sum: "$sentiment.votes_negative" }
    }
  }
])
```

## π― λ‹¤μ λ‹¨κ³„: Phase 2 - LangGraph Agent κΈ°λ°

Phase 1μ΄ μ™„λ£λμ—μΌλ―€λ΅ μ΄μ  **Phase 2: LangGraph Agent Foundation**μΌλ΅ μ§„ν–‰ν•  μ μμµλ‹λ‹¤.

### Phase 2 μ£Όμ” μ‘μ—…
1. **AgentState TypedDict μ •μ**
   - μ‹μ¥ λ°μ΄ν„°, λ‰΄μ¤, κΈ°μ μ  μ§€ν‘, μ¶”λ΅  κ³Όμ • μ €μ¥

2. **LangGraph κΈ°λ³Έ κ·Έλν”„ κµ¬μ΅°**
   - StateGraph μƒμ„±
   - λ…Έλ“ μ •μ (Analyst, Researcher, Risk Manager, Trader)
   - μ—£μ§€ λ° μ΅°κ±΄λ¶€ λΌμ°ν…

3. **Fundamental Analyst λ…Έλ“**
   - RAG κΈ°λ° μ‹μ¥ λ¶„μ„
   - PostgreSQLμ—μ„ OHLCV λ°μ΄ν„° μ΅°ν
   - MongoDBμ—μ„ λ‰΄μ¤ λ°μ΄ν„° μ΅°ν

4. **μ²΄ν¬ν¬μΈν… μ‹μ¤ν…**
   - MongoDBλ¥Ό ν™μ©ν• μƒνƒ μ €μ¥
   - μ¤‘λ‹¨/μ¬κ° κΈ°λ¥

5. **LangSmith νΈλ μ΄μ‹±**
   - Agent μ‹¤ν–‰ μ¶”μ 
   - λ””λ²„κΉ… λ° μµμ ν™”

### Phase 2 μμƒ μ†μ” μ‹κ°„
2-3μ£Ό

### Phase 2 μ‹μ‘ μ΅°κ±΄
β… Phase 1 μΈν”„λΌ ν…μ¤νΈ ν†µκ³Ό
β… 1λ…„μΉ OHLCV λ°μ΄ν„° μμ§‘ μ™„λ£
β… λ‰΄μ¤ λ°μ΄ν„° μμ§‘ μ™„λ£
β³ OpenAI λλ” Anthropic API ν‚¤ μ¤€λΉ„

## π“ μ°Έκ³  λ¬Έμ„

- **Phase 1 μƒμ„Έ κ°€μ΄λ“**: `backend/README_PHASE1.md`
- **μ „μ²΄ κµ¬ν„ κ³„ν**: `.claude/plans/radiant-chasing-willow.md`
- **Docker Compose**: `docker-compose.yml`
- **λ°μ΄ν„°λ² μ΄μ¤ μ¤ν‚¤λ§**: `backend/db/init_postgres.sql`, `backend/db/init_mongodb.js`

## π› λ¬Έμ  ν•΄κ²°

λ¬Έμ κ°€ λ°μƒν•λ©΄:
1. `backend/README_PHASE1.md`μ λ¬Έμ  ν•΄κ²° μ„Ήμ… μ°Έμ΅°
2. Docker λ΅κ·Έ ν™•μΈ: `docker-compose logs`
3. μ»¨ν…μ΄λ„ μ¬μ‹μ‘: `docker-compose restart`
4. μ™„μ „ μ΄κΈ°ν™”: `docker-compose down -v && docker-compose up -d`

## π’΅ μ£Όμ” μ„±κ³Ό

β… **μ™„μ „ μλ™ν™”λ μΈν”„λΌ κµ¬μ¶•**
   - Docker Composeλ΅ ν• λ²μ— λ¨λ“  λ°μ΄ν„°λ² μ΄μ¤ μ‹¤ν–‰
   - μλ™ μ¤ν‚¤λ§ μ΄κΈ°ν™”
   - μ›Ή UI μ κ³µ (Adminer, Mongo Express)

β… **ν”„λ΅λ•μ…κΈ‰ λ°μ΄ν„° μμ§‘ νμ΄ν”„λΌμΈ**
   - CCXTλ¥Ό ν†µν• μ•μ •μ μΈ OHLCV μμ§‘
   - CryptoPanic APIλ¥Ό ν†µν• λ‰΄μ¤ μμ§‘
   - μ¤‘λ³µ λ°©μ§€ λ° μ—λ¬ λ³µκµ¬

β… **ν•μ΄λΈλ¦¬λ“ λ°μ΄ν„°λ² μ΄μ¤ μ•„ν‚¤ν…μ²**
   - PostgreSQL + TimescaleDB (κµ¬μ΅°ν™” λ°μ΄ν„°)
   - MongoDB (λΉ„μ •ν• λ°μ΄ν„°)
   - Redis (μΊμ‹±)
   - pgvector (RAG μ§€μ›)

β… **μ™„μ „ν• ν…μ¤νΈ μ»¤λ²„λ¦¬μ§€**
   - 7κ°€μ§€ ν•µμ‹¬ μΈν”„λΌ ν…μ¤νΈ
   - μλ™ν™”λ κ²€μ¦ μ¤ν¬λ¦½νΈ

---

**Phase 1 μ™„λ£λ¥Ό μ¶•ν•ν•©λ‹λ‹¤! π‰**

μ΄μ  λ³Έκ²©μ μΈ AI Agent κ°λ°μ„ μ‹μ‘ν•  μ¤€λΉ„κ°€ λμ—μµλ‹λ‹¤.
